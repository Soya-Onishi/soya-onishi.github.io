<!doctype html><html lang=en>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Your description">
<meta name=theme-color content="#0e0b2b">
<link rel=canonical href=https://soya-onishi.github.io/post/extern-crate%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6/>
<meta itemprop=name content="extern crateについて">
<meta itemprop=description content="extern crateについてedition 2018以降はほぼ使う必要がないとRustBookあたりに書いてあったと記憶しているが、 その感覚でいるとたまにlinterにextern crateを書けと言われたりする。 どういうときにextern crateが必要になるのかちゃんと理解できてなかったので、いい機会なので調べてみました。
TL;DR 基本的にはRustBookの言うとおり、不要。
例外として、coreやallocクレートのようなCargo.tomlで指定せずtoolchainに紐付いているようなクレートなど、 Cargo.tomlで指定しないクレートに対してはextern crateが必要。
例外の例外として、coreなどと同様にtoolchainに紐づくstdはプレリュードとしてextern crateを記載しなくても使えるようになっている。
もともとはどうだったのか 用法としてはGCCなどでの-lオプションに近く、 edition 2018以前は各クレートごとにextern crateが必要だったらしい。 しかし、大半はCargo.tomlの指定から導き出せるため、extern crateを不要にして余計な記述を廃したという流れとのこと。
edition 2018以降はどうなのか 参考にしているページではボイラープレートなどなどと言っているのでextern crate <クレート名>みたいなのが大量に記述されていたんじゃないかと思いますが、 edition 2018以降はそのような記述が不要になっています。
ただし例外として、Cargo.tomlで記載せずに使うような標準ライブラリレベルのallocやcoreクレートについては extern crateでの指定が必要のようです。 これらはもともと特定のtriple（例：x86_64_unknown-linux-gnuなど）のtoolchainに紐付いているものになります。 toolchainに紐付いているクレートにはstdも含まれるわけですが、 こちらについては自動的に参照できる状態になっているため、わざわざextern crate stdと記述する必要はないです。
参考ページ Forumでの回答
The Rust Referenceでの記載"><meta itemprop=datePublished content="2023-01-05T22:25:29+09:00">
<meta itemprop=dateModified content="2023-01-05T22:25:29+09:00">
<meta itemprop=wordCount content="41">
<meta itemprop=keywords content="Rust,">
<meta property="og:title" content="extern crateについて">
<meta property="og:description" content="extern crateについてedition 2018以降はほぼ使う必要がないとRustBookあたりに書いてあったと記憶しているが、 その感覚でいるとたまにlinterにextern crateを書けと言われたりする。 どういうときにextern crateが必要になるのかちゃんと理解できてなかったので、いい機会なので調べてみました。
TL;DR 基本的にはRustBookの言うとおり、不要。
例外として、coreやallocクレートのようなCargo.tomlで指定せずtoolchainに紐付いているようなクレートなど、 Cargo.tomlで指定しないクレートに対してはextern crateが必要。
例外の例外として、coreなどと同様にtoolchainに紐づくstdはプレリュードとしてextern crateを記載しなくても使えるようになっている。
もともとはどうだったのか 用法としてはGCCなどでの-lオプションに近く、 edition 2018以前は各クレートごとにextern crateが必要だったらしい。 しかし、大半はCargo.tomlの指定から導き出せるため、extern crateを不要にして余計な記述を廃したという流れとのこと。
edition 2018以降はどうなのか 参考にしているページではボイラープレートなどなどと言っているのでextern crate <クレート名>みたいなのが大量に記述されていたんじゃないかと思いますが、 edition 2018以降はそのような記述が不要になっています。
ただし例外として、Cargo.tomlで記載せずに使うような標準ライブラリレベルのallocやcoreクレートについては extern crateでの指定が必要のようです。 これらはもともと特定のtriple（例：x86_64_unknown-linux-gnuなど）のtoolchainに紐付いているものになります。 toolchainに紐付いているクレートにはstdも含まれるわけですが、 こちらについては自動的に参照できる状態になっているため、わざわざextern crate stdと記述する必要はないです。
参考ページ Forumでの回答
The Rust Referenceでの記載">
<meta property="og:type" content="article">
<meta property="og:url" content="https://soya-onishi.github.io/post/extern-crate%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2023-01-05T22:25:29+09:00">
<meta property="article:modified_time" content="2023-01-05T22:25:29+09:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="extern crateについて">
<meta name=twitter:description content="extern crateについてedition 2018以降はほぼ使う必要がないとRustBookあたりに書いてあったと記憶しているが、 その感覚でいるとたまにlinterにextern crateを書けと言われたりする。 どういうときにextern crateが必要になるのかちゃんと理解できてなかったので、いい機会なので調べてみました。
TL;DR 基本的にはRustBookの言うとおり、不要。
例外として、coreやallocクレートのようなCargo.tomlで指定せずtoolchainに紐付いているようなクレートなど、 Cargo.tomlで指定しないクレートに対してはextern crateが必要。
例外の例外として、coreなどと同様にtoolchainに紐づくstdはプレリュードとしてextern crateを記載しなくても使えるようになっている。
もともとはどうだったのか 用法としてはGCCなどでの-lオプションに近く、 edition 2018以前は各クレートごとにextern crateが必要だったらしい。 しかし、大半はCargo.tomlの指定から導き出せるため、extern crateを不要にして余計な記述を廃したという流れとのこと。
edition 2018以降はどうなのか 参考にしているページではボイラープレートなどなどと言っているのでextern crate <クレート名>みたいなのが大量に記述されていたんじゃないかと思いますが、 edition 2018以降はそのような記述が不要になっています。
ただし例外として、Cargo.tomlで記載せずに使うような標準ライブラリレベルのallocやcoreクレートについては extern crateでの指定が必要のようです。 これらはもともと特定のtriple（例：x86_64_unknown-linux-gnuなど）のtoolchainに紐付いているものになります。 toolchainに紐付いているクレートにはstdも含まれるわけですが、 こちらについては自動的に参照できる状態になっているため、わざわざextern crate stdと記述する必要はないです。
参考ページ Forumでの回答
The Rust Referenceでの記載">
<title>extern crateについて | Indigo Bell</title>
<link defer rel=stylesheet href=/font.cc958b841144b5e6348b4723514869a46d121c6cf691e9e0009d86281ad5cc37.css integrity>
<link rel=stylesheet href=https://soya-onishi.github.io/css/main.css><link rel=stylesheet href=https://soya-onishi.github.io/css/normalize.css><link rel=stylesheet href=https://soya-onishi.github.io/css/bootstrap.css><link rel=stylesheet href=https://soya-onishi.github.io/css/custom-font.css>
</head>
<body class="d-flex flex-column justify-content-between" style=min-height:100vh>
<div class=justify-content-start>
<header class="p-3 text-bg-dark site-header sticky-top py-3">
<div class=container>
<div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
<ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
<li><a href=/ class="nav-link px-3 text-white">Home</a></li>
<li><a href=/about class="nav-link px-3 text-white">About</a></li>
</ul>
<ul style=list-style-type:none class="list-group list-group-horizontal">
<li class=px-3>
<a href=https://github.com/Soya-Onishi><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#fff" class="bi bi-github" viewBox="0 0 16 16"><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.012 8.012.0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
</a>
</li>
<li class=px-3>
<a href=https://twitter.com/out__of__water><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#fff" class="bi bi-twitter" viewBox="0 0 16 16"><path d="M5.026 15c6.038.0 9.341-5.003 9.341-9.334.0-.14.0-.282-.006-.422A6.685 6.685.0 0016 3.542a6.658 6.658.0 01-1.889.518 3.301 3.301.0 001.447-1.817 6.533 6.533.0 01-2.087.793A3.286 3.286.0 007.875 6.03 9.325 9.325.0 011.108 2.601a3.289 3.289.0 001.018 4.382A3.323 3.323.0 01.64 6.575v.045a3.288 3.288.0 002.632 3.218 3.203 3.203.0 01-.865.115 3.23 3.23.0 01-.614-.057 3.283 3.283.0 003.067 2.277A6.588 6.588.0 01.78 13.58 6.32 6.32.0 010 13.535 9.344 9.344.0 005.026 15z"/></svg>
</a>
</li>
</ul>
</div>
</div>
</header>
<div id=content>
<div class=container>
<div class="row justify-content-center pt-4">
<div class=pr-lg-4>
<div class="title mb-3">
<h1 class="text-left mb-4 fw-bold">extern crateについて</h1>
<div class="text-left mb-4">
<div class=time>Jan. 5, 2023</div>
</div>
<button class="btn btn-outline-light btn-sm rounded" type=button>
<div id=tags>
<li><a href=/tags/rust>Rust</a></li>
</div>
</button>
</div>
<hr>
<article class=page-content>
<p><code>extern crate</code>についてedition 2018以降はほぼ使う必要がないとRustBookあたりに書いてあったと記憶しているが、
その感覚でいるとたまにlinterに<code>extern crate</code>を書けと言われたりする。
どういうときに<code>extern crate</code>が必要になるのかちゃんと理解できてなかったので、いい機会なので調べてみました。</p>
<h2 id=tldr>TL;DR</h2>
<p>基本的にはRustBookの言うとおり、不要。</p>
<p>例外として、<code>core</code>や<code>alloc</code>クレートのような<code>Cargo.toml</code>で指定せずtoolchainに紐付いているようなクレートなど、
<code>Cargo.toml</code>で指定しないクレートに対しては<code>extern crate</code>が必要。</p>
<p>例外の例外として、<code>core</code>などと同様にtoolchainに紐づく<code>std</code>はプレリュードとして<code>extern crate</code>を記載しなくても使えるようになっている。</p>
<h2 id=もともとはどうだったのか>もともとはどうだったのか</h2>
<p>用法としてはGCCなどでの<code>-l</code>オプションに近く、
edition 2018以前は各クレートごとに<code>extern crate</code>が必要だったらしい。
しかし、大半は<code>Cargo.toml</code>の指定から導き出せるため、<code>extern crate</code>を不要にして余計な記述を廃したという流れとのこと。</p>
<h2 id=edition-2018以降はどうなのか>edition 2018以降はどうなのか</h2>
<p>参考にしているページではボイラープレートなどなどと言っているので<code>extern crate &lt;クレート名></code>みたいなのが大量に記述されていたんじゃないかと思いますが、
edition 2018以降はそのような記述が不要になっています。</p>
<p>ただし例外として、<code>Cargo.toml</code>で記載せずに使うような標準ライブラリレベルの<code>alloc</code>や<code>core</code>クレートについては
<code>extern crate</code>での指定が必要のようです。
これらはもともと特定のtriple（例：x86_64_unknown-linux-gnuなど）のtoolchainに紐付いているものになります。
toolchainに紐付いているクレートには<code>std</code>も含まれるわけですが、
こちらについては自動的に参照できる状態になっているため、わざわざ<code>extern crate std</code>と記述する必要はないです。</p>
<h2 id=参考ページ>参考ページ</h2>
<p><a href=https://users.rust-lang.org/t/usage-of-extern-crate/73619/8 target=_blank rel="nofollow noopener noreferrer">Forumでの回答</a><br>
<a href=https://doc.rust-lang.org/reference/items/extern-crates.html target=_blank rel="nofollow noopener noreferrer">The Rust Referenceでの記載</a></p>
</article>
</div>
</div>
</div>
</div>
</div>
<div>
<div class="foot mt-auto">
<div class=container>
<footer class=py-4>
<div class="d-flex justify-content-between">
<div>&copy; All rights reserved.</div>
<div>powered by <a href=https://gohugo.io/ class=text-black>Hugo</a></div>
</div>
</footer>
</div>
</div>
</div>
</body>
</html>